<div class="job-offers-container">
  <!-- Enhanced Hero Section -->
  <section class="hero-section">
    <div class="hero-background">
      <div class="geometric-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
      </div>
      <div class="floating-elements">
        <div class="floating-icon"><i class="fas fa-briefcase"></i></div>
        <div class="floating-icon"><i class="fas fa-users"></i></div>
        <div class="floating-icon"><i class="fas fa-chart-line"></i></div>
      </div>
    </div>
    
    <div class="container">
      <div class="hero-content">
        <div class="hero-badge">
          <i class="fas fa-star"></i>
          <span>Premium Job Platform</span>
        </div>
        
        <h1 class="hero-title">
          <span class="title-line">Discover Your</span>
          <span class="title-highlight">Dream Career</span>
        </h1>
        
        <p class="hero-subtitle">
          Connect with top-tier companies and find opportunities that match your expertise and aspirations
        </p>

        <!-- Enhanced Search Bar -->
        <div class="search-container">
          <div class="search-card">
            <div class="search-input-group">
              <div class="search-input">
                <i class="fas fa-search"></i>
                <input
                  type="text"
                  placeholder="Job title, keywords, or company..."
                  [(ngModel)]="searchTitle"
                  (input)="onSearch()"
                />
              </div>
              <div class="search-divider"></div>
              <div class="search-input">
                <i class="fas fa-map-marker-alt"></i>
                <input
                  type="text"
                  placeholder="Location"
                  [(ngModel)]="searchLocation"
                  (input)="onSearch()"
                />
              </div>
            </div>
            <button class="search-btn" (click)="onSearch()">
              <i class="fas fa-search"></i>
              <span>Find Jobs</span>
            </button>
          </div>
        </div>

        <!-- Enhanced Stats -->
        <div class="stats-container">
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-briefcase"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number">{{ jobOffers.length }}</span>
              <span class="stat-label">Active Positions</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-building"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number">{{ totalCompanies }}</span>
              <span class="stat-label">Top Companies</span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number">{{ totalCandidates }}</span>
              <span class="stat-label">Job Seekers</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="main-content">
    <div class="container">
      <div class="content-layout">
        <!-- Enhanced Filters Sidebar -->
        <aside class="filters-sidebar">
          <div class="filter-header">
            <h3> Smart Filters</h3>
            <button class="clear-filters-btn" (click)="clearAllFilters()">  
              Clear All
            </button>
          </div>
          
          <div class="filter-section">
            <!-- Job Type Filter -->
            <div class="filter-group">
              <h4> Job Type</h4>
              <div class="filter-options">
                <label *ngFor="let type of jobTypes" class="checkbox-item">
                  <input type="checkbox" [value]="type" (change)="toggleTypeFilter(type)" [checked]="typeFilters.includes(type)" />
                  <span class="checkmark"></span>
                  <span class="label-text">{{ type.replace('_', ' ') }}</span>
                </label>
              </div>
            </div>
            
            <!-- Salary Range Filter -->
            <div class="filter-group">
              <h4>Salary Range</h4>
              <div class="salary-inputs">
                <div class="salary-input">
                  <label>Min</label>
                  <input type="number" placeholder="TND 0" [(ngModel)]="salaryMin" (input)="onSearch()" />
                </div>
                <div class="salary-input">
                  <label>Max</label>
                  <input type="number" placeholder="TND 200K+" [(ngModel)]="salaryMax" (input)="onSearch()" />
                </div>
              </div>
            </div>
            
            <!-- Experience Level Filter -->
            <div class="filter-group">
              <h4> Experience</h4>
              <div class="filter-options">
                <label *ngFor="let exp of experienceLevels" class="checkbox-item">
                  <input type="checkbox" [value]="exp" (change)="toggleExperienceFilter(exp)" [checked]="experienceFilters.includes(exp)" />
                  <span class="checkmark"></span>
                  <span class="label-text">{{ exp.replace('_', ' ') }}</span>
                </label>
              </div>
            </div>
            
            <!-- Education Level Filter -->
            <div class="filter-group">
              <h4> Education</h4>
              <div class="filter-options">
                <label *ngFor="let edu of educationLevels" class="checkbox-item">
                  <input type="checkbox" [value]="edu" (change)="toggleEducationFilter(edu)" [checked]="educationFilters.includes(edu)" />
                  <span class="checkmark"></span>
                  <span class="label-text">{{ edu.replace('_', ' ') }}</span>
                </label>
              </div>
            </div>
          </div>
        </aside>

        <!-- Enhanced Job Listings -->
        <main class="job-listings">
          <div class="listings-header">
            <div class="results-info">
              <h2>Job Opportunities</h2>
              <div class="results-meta">
                <span class="results-count">{{ filteredOffers.length }} positions found</span>
                <span class="results-time">Updated just now</span>
              </div>
            </div>
            
            <div class="listings-controls">
              <div class="sort-controls">
                <select class="sort-select" [(ngModel)]="selectedSortOption" (ngModelChange)="onSortChange()">
                  <option value="Most Recent">Most Recent</option>
                  <option value="Salary: High to Low">Salary: High to Low</option>
                  <option value="Salary: Low to High">Salary: Low to High</option>
                  <option value="Experience Level">Experience Level</option>
                </select>
                
              </div>
              
              <div class="view-toggle">
                <button class="view-btn active">
                  <i class="fas fa-th-large"></i>
                </button>
                <button class="view-btn">
                  <i class="fas fa-list"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Active Filters Display -->
          <div class="active-filters" *ngIf="hasActiveFilters()">
            <span class="filter-label">Active Filters:</span>
            <div class="filter-tags">
              <span class="filter-tag" *ngFor="let filter of getActiveFilters()">
                {{ filter }}
                <i class="fas fa-times" (click)="removeFilter(filter)"></i>
              </span>
            </div>
          </div>

          <!-- Enhanced Job Cards Grid -->
          <div class="job-cards-grid" *ngIf="!loading; else loadingTemplate">
            <div *ngFor="let job of filteredOffers; trackBy: trackByJobId" class="job-card" [class.featured]="job.status === 'ACTIVE'">
             
              
              <!-- Card Header -->
              <div class="card-header">
                <div class="company-info">
                  <div class="company-logo">
                    <img
                      *ngIf="job.company?.logoUrl; else defaultLogo"
                      [src]="job.company?.logoUrl"
                      alt="Company Logo"
                    />
                    <ng-template #defaultLogo>
                      <i class="fas fa-building"></i>
                    </ng-template>
                  </div>
                  
                  <div class="company-details">
                    <h3 class="job-title">{{ job.title }}</h3>
                    <p class="company-name">
                      {{ job.company?.name || 'Unknown Company' }}
                    </p>
                  
                  </div>
                </div>
                
                <div class="job-badge">
                  <i class="fas fa-clock"></i>
                  {{ job.jobType?.replace('_', ' ') }}
                </div>
              </div>

              <!-- Card Body -->
              <div class="card-body">
                <div class="job-meta">
                  <div class="meta-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>{{ job.jobLocation }}</span>
                  </div>
                  <div class="meta-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span>TND {{ job.salary | number:'1.0-0' }}</span>
                  </div>
                  <div class="meta-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>{{ job.postedDate | date:'MMM dd' }}</span>
                  </div>
                  <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>{{ getTimeAgo(job.postedDate) }}</span>
                  </div>
                </div>

                <div class="job-tags">
                  <span class="tag" *ngFor="let skill of job.requiredSkills?.slice(0, 3)">
                    <i class="fas fa-tag"></i>
                    {{ skill }}
                  </span>
                  <span class="tag more-tags" *ngIf="job.requiredSkills && job.requiredSkills.length > 3">
                    +{{ job.requiredSkills.length - 3 }} more
                  </span>
                </div>

                <p class="job-description">
                  {{ job.description | slice:0:120 }}...
                </p>
                
                <div class="job-benefits" *ngIf="job.benefits && job.benefits.length > 0">
                  <span class="benefit-tag" *ngFor="let benefit of job.benefits">
                    <i class="fas fa-gift"></i>
                    {{ benefit }}
                  </span>
                </div>
                
              </div>

              <!-- Card Footer -->
              <div class="card-footer">
                <button class="apply-btn" (click)="goToJobDetails(job.jobOfferId)">
                  <i class="fas fa-paper-plane"></i>
                  <span>Apply Now</span>
                </button>
                <button class="save-btn" [class.saved]="isJobSaved(job.jobOfferId)" (click)="toggleJobSaved(job.jobOfferId)">
  <i class="far fa-heart" *ngIf="!isJobSaved(job.jobOfferId)"></i>
  <i class="fas fa-heart" *ngIf="isJobSaved(job.jobOfferId)"></i>
</button>

                <button class="share-btn">
                  <i class="fas fa-share-alt"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Enhanced Pagination -->
          <div class="pagination-container">
            <div class="pagination">
              <button class="page-btn">
                <i class="fas fa-chevron-left"></i>
                Previous
              </button>
              
              <div class="page-numbers">
                <button class="page-btn active">1</button>
                <button class="page-btn">2</button>
                <button class="page-btn">3</button>
                <span class="page-dots">...</span>
                <button class="page-btn">10</button>
              </div>
              
              <button class="page-btn">
                Next
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>

          <!-- Loading Template -->
          <ng-template #loadingTemplate>
            <div class="loading-container">
              <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Loading amazing opportunities...</p>
              </div>
            </div>
          </ng-template>
        </main>
      </div>
    </div>
  </section>
</div>
